language: node_js
before_install:
  touch .env;
  if [ $IS_INTEGRATION_TEST ]; then rvm install ruby-2.4.3 --binary && rvm use ruby-2.4.3 && bundle install; else echo "Not an integration test. Skipping Ruby setup"; fi
script: npm run $TEST
addons:
  hosts:
    - braintree-web-dropin.bt.local
notifications:
  email: false
  slack:
    on_success: change
    on_failure: always
    on_pull_requests: false
    rooms:
      - secure: cVafioxYjLxi6RkGvgt1iSvKyz0c6IpC3JkfXSwd63LiSzX82ZyGmeCMZpUzeLVOc/jCrcTCQL6bPcMUrgyBtibpVti9rZwi7c1FzWjTEXvVB8nO7Daa43sa5zFe3Bf61xgA+2O3mzgVxOsoTx7y/9ptNoCt5ViIFGwWIEGSOmGSR4U0CLN/sAg7tlaa6xIif7oePsZId/6lbweKhrvxCKscio4ZUw8L6HhTQgTl2Hi2jf9/kpYbQY4NpyvKNIPygX4yZAGVZQDA14qhz9HAz0np4Xj5iKQVM468LDiexkP8ZeM+gdoAjHzyrPKtKnxfWB2CCYSEb5BaP7e6M4nwchcsYJ8YZdVJXiorthqh/oYojI54AKdUgz/ii+pnOmIFG0hAHPGL8s5Vw07QoQzM93XJFSuJ4ZhUzcsx5SeATtjXps8T3IZK7/9AwRzLvMqny5i6iUw1ZaVftrihIfX41vDkZMomsOpoZzCyhKK3g/xXsTbHwAj/ZiliUeadxJp+KApaMSphyTx6Soht4MYR/aSxZ1VFreNYD7PChmlne8MqwMYQ5vdjES2BDvD6Xhp1CL3MkHnCtkxAFzziGLOmhkqGnt84CQhPAVZQOxE7kIUY+Gq7ENrNIrz7vSv6aYQ6wTEnsynjR8EIF2An0fO+evqHhXPnGJaEFV4Mcw7TMxI=
env:
  matrix:
  - TEST="test"
  - TEST="test:hint"
  - TEST="test:publishing"
  - TEST="test:integration:paypal-only" IS_INTEGRATION_TEST=true
  - TEST="test:integration:paypal-skipped" IS_INTEGRATION_TEST=true
  # iOS tests on Travis are flaky. Run these manually before merging something in
  # - TEST="test:integration" PLATFORM="ios" IS_INTEGRATION_TEST=true
  global:
  - IS_TRAVIS=true
  - secure: Xc8TcaxwtvtK0L4l2doyRicIg+7A84Hlo6VQreSdsQ92PFVhUwHK0a4e6rqZmNdtT+S7Ml8XToANE5xnRkTFSdljqnzSwdmW0JMclVPM8HRDHB7TA1VMAn+sehrpohZChnjeACsEyAgiIbQ11bZ5niTCzm0UgXKUdMLXjDHxKsGKtnRHIWyl0nnyKrrLTFeQfSe1p8mtpaPzpBztSfU96tSnOQzTc47Ljn47X1r/0/vNwbnwhcL1pT6chT4SfMnXPQFZbPXy0Z8faxMqwb8a9hDwad33cgYIvYdHpYBbzCQwbHkklPaJ/i1iGR6idJ9m8XlEuLT/Z3l9vODx3enK0ngKtpnpa73rapsNfoJzVxgHR4A2gqtekn1JF7jvBqG9pKj0m5BR0OpQe1MJqTNjdVv/3QHeU8bFzbkEw2xhyAoN6dY2/aBT3nHcqy5KJZ9Z/na04KMBn+qfyjXiLGTpR51GcjXsqsG/utZO6YKP88Fny37PW6v805RFLhvAoqHlNpxIG/algRpXlwkvUkfAuK4WlpjLX6F9gt8RecY4gs1ixV6uSvIwepLzmOCvBz/j37R1ur3TVYzfLvEOxWK/Pvaa1Fjk9g5fjlvfaDkwGE0+mYtIu18XC1hLcZwQLcXsaA47EVphlCGiFYZ3EmYWCyEbA/jhWNrkGJ6OOzGUHGY=
  - secure: fu1su5hjxYKuwKFOkSJhlfjJOxknZ++iwnpRMEhaDCEseai2q/CnJoA2vKTcV+JFQ7+iVDWUeJ08vCyXUYXXlXuru9LljSwiLHsHCFsZ+YvY5CGQ5zYv9AcwD8mEIDMA1WdNXFvODz8aQazJ5BhBDCon6db5VSDGCz6ZGOmLJXe9eAANuTSDXr1GaePnFHO+Yi9Wgso4Q9ApwIJo7GAv++NcPujBTtsG7HYVclpNKzqOG6cG+Rf+2kU4cyErZkML1wE/p7tR1Hb8qOqNHTsjDxvpFUe+MTnZFfjuMUIiClL3Q3UR5AhBEdShfUMkYktNdv8ejgCne9h3l7VrBFpwiZb0+BcC+YJv6xrgnHFjyhuBCSayIydr9iFrn/4pgLNU96MvW781apI7kLgoPCJNREDmY81eR+FgZe+cLAahQ1UTSDGPTndD5xQGCi/58/DTzsWkL1/B1ccJLJRtjLlLdrmcm1eWKfE88UqAa77AN9MCuMpVl3KVb3m47iUdnWtOcQ9iZgdxaAKsAEUiCanQTeKgfugaB39BJov/k6eivEW4463D7M+cNTY26jKMhs+FxZHE0QyduBR2t5Fce5Br7fTvRwaCq638BhBrbgM0iod71x2x0xj0vJjrg+eaj2S+WB1Jp6rxtOgo0eLoUAZrl+4OuuHo8inYD+QDXA5udEk=
  - secure: MmB7txN/yIgFH2dVvgM1oUFZE+g2/F8OSN7IUgjzW9FMSZOyZp2EWS4+RsD3gdM2UenC98JD6v8Cflw6ugwkA4LMPwwU4F1w0WoJ8EGtwobz7adqOje919bgHCRKQUArugoqw+RxYDrXoSYRcwyEQ/asvPMfrE0ji+gwHQ1cv0r6URwa7LwSZgupTc9IUOw71+lpyPBYu3qJXUohLj3eMdnGLaOjJxBsivGA5DLtYFm7ENHicXKoCXxlkkcuN869m77SiNHa97EQLQ6ISha4rwOjqgUR0/xb0Mv5hs3MYIIYbvYkBBWXeTGoi3eE6Twia1Sfebk8HDXm+ayq/8YpSlKxEq5Nxl5cXUEFzwDYcF5bA8EY/Paxv40schUiY9o1khTBECQToVLT0KDIn9YyxUD3IjmX5w+/8klGZ9eHUysyXa+lyxyLAzK2rLKMRpCO8WS6hdQl6UJNU09hmeNX8O4NYWpp8r255frfRYneWrfAeYpmSoH6sqiR08hV8KBabz/6vxqIiFtND5FnaI1uKrOYDwwEKQKVTc8qDDmnPcbcxoA9eWjaLb8zF5yoO6rGnGJmnx0wc00f7LqRri7BBUcfAo9t90qZejLmAJVN/bO/JU4dkP1vvIGU8N7IFDcbjLCsfB52MX6XyXMSLHZrdvQNQk182fxAdazdH6arZG8=
  - secure: VX49on2azzVPq3eMEba1CpcnAphB78K6YXAy/VMwe9kh5DMVxYN4sQv+ZWrU3ZKBI+lYQf8ReKEvGFGaFbpC1ZDYKL9LIfJksmLFXfWFKBHDs5VeC/fOreGmMQP2Y1zlhKb8ZZbeHgFVG38aGM3E/q5b0PyBEdaEFoL2cTg5OFMfWrIaSnhOy92OzU1Be5VsFNCBmFLFd+cKGSXxt4qOLZEp2oROw41UvabQwCpSDf5SxEzDRLcdm/2GIc3KYeZAV2pGw9ZTDqkohsV0iM/vEPZ/sYeCXERBEv75itW7NxpZjr5r+DF1uzSOAjxNEnv54+cDSgtmBBm+Zrfq0651FzfeoAyMr8rqYS1xLLIa//7D7+dl2a1veSg3NquSqSxlHIq6BEgwxcEaBiwu+FM+W0yeM4ZCRI9xXa0tK97nZIiauOGH1JKToSPDvLPwdvTRaTR/FWgGHfUxEJZ7QMBmhnnfNUizRzkewyxvYE/uQP817qjNNMBsZJYMHu+rUmvUdVoVdzHbOkVVKV8vcwUsHOwVn0JUJA/6TPaEFQJnrIhr+5jjf1M0yt0kWhF/41/AYe9d+YJgqGSy4+nCOUfMWtLlaSDZPbE/E4kPy8ZJ9i3xloWuCAspEyJkB7Jk1gJFGpXO4BVLdPfA7riUoy5+mSnLE2cNKXIaNgndXei4Fdk=
